1000 *
sum by (generationType, entityType, integration, executionID) (
  clamp_min(
    max_over_time(edi_wrk_integrator_elapsed_millis_seconds_sum[$__interval])
    - min_over_time(edi_wrk_integrator_elapsed_millis_seconds_sum[$__interval]),
    0
  )
)
/
clamp_min(
  sum by (generationType, entityType, integration, executionID) (
    max_over_time(edi_wrk_integrator_elapsed_millis_seconds_count[$__interval])
    - min_over_time(edi_wrk_integrator_elapsed_millis_seconds_count[$__interval])
  ),
  1
)
sum by (generationType, entityType, integration, executionID) (
  clamp_min(
    max_over_time(edi_wrk_integrator_lines_total[$__interval])
    - min_over_time(edi_wrk_integrator_lines_total[$__interval]),
    0
  )
)
