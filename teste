@Repository
public class ItemRedisRepositoryImpl implements ItemRedisRepository {

    private final RedisTemplate<String, Object> redisTemplate;

    public ItemRedisRepositoryImpl(RedisTemplate<String, Object> redisTemplate) {
        this.redisTemplate = redisTemplate;
    }

    @Override
    public void criar(ItemRedisEntity itemRedisEntity) {
        redisTemplate.opsForValue().set("item:" + itemRedisEntity.getId(), itemRedisEntity);
    }

    @Override
    public ItemRedisEntity obter(Integer id) {
        return (ItemRedisEntity) redisTemplate.opsForValue().get("item:" + id);
    }

    @Override
    public void atualizar(ItemRedisEntity itemRedisEntity) {
        redisTemplate.opsForValue().set("item:" + itemRedisEntity.getId(), itemRedisEntity);
    }

    @Override
    public void excluir(Integer id) {
        redisTemplate.delete("item:" + id);
    }

    @Override
    public Optional<ItemRedisEntity> findById(Integer id) {
        return Optional.ofNullable((ItemRedisEntity) redisTemplate.opsForValue().get("item:" + id));
    }

    @Override
    public Page<ItemRedisEntity> findAll(Pageable pageable) {
        throw new UnsupportedOperationException("Método findAll não implementado para Redis.");
    }

    @Override
    public void save(ItemRedisEntity itemRedisEntity) {
        redisTemplate.opsForValue().set("item:" + itemRedisEntity.getId(), itemRedisEntity);
    }
}
