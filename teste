global:
  bu: financial_services_pj
  app_stage: qa
  image:
    tag: 0c778e8db3d0a8f2ccf8027f079b4dbc1324ba0e
  releaseNumber: 0
  topologySpreadAz: true
  jvm_metrics:
    enabled: true
    port: 8081
  externalSecrets:
    - name: default
      enabled: true
      refreshInterval: 10m
      type: vault
      mountPath: kubernetes-srvfpj-use1-hom
      path: financial_services_pj/hom/scrt
      dataFrom:
        - secretFile: ms-balance-pix-transactions
  namespace:
    labels:
      dynatrace: true
      team: vendas_recebiveis

picpay-ms-v2-qa:
  enabled: true
  apis: []

  workers:
    - name: cash-in
      annotations:
        observability.ppay.me/log_service: DYNA
      labels:
        bu: financial_services_pj
        fmu: financial_services_pj
        product: internet_banking_e_painel
        produto: internet_banking_e_painel
        servico: home
        service: home
        squad: extrato_vendas
        tribo: processamento_liquidacao
        tribe: processamento_liquidacao
        vertical: aceitacao
        subservico: ms-balance-pix-transactions-worker-cash-in
        escalation: "PJ-Extrato_Venda_e_Recebiveis"
      enabled: true
      image: 289208114389.dkr.ecr.us-east-1.amazonaws.com/picpay-dev/ms-balance-pix-transactions
      args:
        - "-Dotel.resource.attributes=service.name=ms-balance-pix-transactions"
        - "-Dspring.profiles.active=pix-receivement-authenticated"
        - "-XX:MaxRAMPercentage=70"
        - "-XX:+UseG1GC"
      envFrom:
        - secretRef:
            name: envs
        - configMapRef:
            name: localenv
      env:
        - name: SERVER_SHUTDOWN_MODE
          value: "graceful"
      lifecycle:
        preStop:
          - "/bin/bash"
          - "-c"
          - "/bin/sleep 20"
      readiness:
        httpGet:
          path: /actuator/health/readiness
          port: 8080
        initialDelaySeconds: 30
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 3
        timeoutSeconds: 5
      liveness:
        httpGet:
          path: /actuator/health/liveness
          port: 8080
        initialDelaySeconds: 200
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 4
        timeoutSeconds: 5
      hpa:
        enabled: true
        min: 1
        max: 2
      containerPort: 8080
      workload: balance-pix-transactions
      spot_suport: high-priority
      requests_cpu: 100m
      limits_cpu: 550m
      requests_memory: 1450Mi
      limits_memory: 1450Mi
      tolerations:
        - effect: NoExecute
          key: spot
          value: "true"
        - effect: NoSchedule
          key: spot
          value: "true"
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: family
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: picpay-ops/workload
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: app
                    operator: In
                    values:
                      - financial-services-pj3

    - name: cash-in-rip-kafka
      annotations:
        observability.ppay.me/log_service: DYNA
      labels:
        bu: financial_services_pj
        fmu: financial_services_pj
        product: internet_banking_e_painel
        produto: internet_banking_e_painel
        servico: home
        service: home
        squad: extrato_vendas
        tribo: processamento_liquidacao
        tribe: processamento_liquidacao
        vertical: aceitacao
        subservico: ms-balance-pix-transactions-worker-cash-in
        escalation: "PJ-Extrato_Venda_e_Recebiveis"
      enabled: true
      image: 289208114389.dkr.ecr.us-east-1.amazonaws.com/picpay-dev/ms-balance-pix-transactions
      args:
        - "-Dotel.resource.attributes=service.name=ms-balance-pix-transactions"
        - "-Dspring.profiles.active=pix-receivement-rip-kafka"
        - "-XX:MaxRAMPercentage=70"
        - "-XX:+UseG1GC"
      envFrom:
        - secretRef:
            name: envs
        - configMapRef:
            name: localenv
      env:
        - name: SERVER_SHUTDOWN_MODE
          value: "graceful"
      lifecycle:
        preStop:
          - "/bin/bash"
          - "-c"
          - "/bin/sleep 20"
      readiness:
        httpGet:
          path: /actuator/health/readiness
          port: 8080
        initialDelaySeconds: 30
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 3
        timeoutSeconds: 5
      liveness:
        httpGet:
          path: /actuator/health/liveness
          port: 8080
        initialDelaySeconds: 200
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 4
        timeoutSeconds: 5
      hpa:
        enabled: true
        min: 1
        max: 2
      containerPort: 8080
      workload: balance-pix-transactions
      spot_suport: high-priority
      requests_cpu: 100m
      limits_cpu: 550m
      requests_memory: 1450Mi
      limits_memory: 1450Mi
      tolerations:
        - effect: NoExecute
          key: spot
          value: "true"
        - effect: NoSchedule
          key: spot
          value: "true"
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: family
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: picpay-ops/workload
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: app
                    operator: In
                    values:
                      - financial-services-pj3

    - name: cash-out
      annotations:
        observability.ppay.me/log_service: DYNA
      labels:
        bu: financial_services_pj
        fmu: financial_services_pj
        product: internet_banking_e_painel
        produto: internet_banking_e_painel
        servico: home
        service: home
        squad: extrato_vendas
        tribo: processamento_liquidacao
        tribe: processamento_liquidacao
        vertical: aceitacao
        subservico: ms-balance-pix-transactions-worker-cash-out
        escalation: "PJ-Extrato_Venda_e_Recebiveis"
      enabled: true
      image: 289208114389.dkr.ecr.us-east-1.amazonaws.com/picpay-dev/ms-balance-pix-transactions
      args:
        - "-Dotel.resource.attributes=service.name=ms-balance-pix-transactions"
        - "-Dspring.profiles.active=pix-transaction,pix-transaction-authenticated"
        - "-XX:MaxRAMPercentage=70"
        - "-XX:+UseG1GC"
      envFrom:
        - secretRef:
            name: envs
        - configMapRef:
            name: localenv
      env:
        - name: SERVER_SHUTDOWN_MODE
          value: "graceful"
      lifecycle:
        preStop:
          - "/bin/bash"
          - "-c"
          - "/bin/sleep 20"
      readiness:
        httpGet:
          path: /actuator/health/readiness
          port: 8080
        initialDelaySeconds: 30
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 3
        timeoutSeconds: 5
      liveness:
        httpGet:
          path: /actuator/health/liveness
          port: 8080
        initialDelaySeconds: 200
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 4
        timeoutSeconds: 5
      hpa:
        enabled: true
        min: 1
        max: 2
      containerPort: 8080
      workload: balance-pix-transactions
      spot_suport: high-priority
      requests_cpu: 100m
      limits_cpu: 550m
      requests_memory: 1450Mi
      limits_memory: 1450Mi
      tolerations:
        - effect: NoExecute
          key: spot
          value: "true"
        - effect: NoSchedule
          key: spot
          value: "true"
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: family
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: picpay-ops/workload
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: app
                    operator: In
                    values:
                      - financial-services-pj3

    - name: fee-enforcer
      annotations:
        observability.ppay.me/log_service: DYNA
      labels:
        bu: financial_services_pj
        fmu: financial_services_pj
        product: internet_banking_e_painel
        produto: internet_banking_e_painel
        servico: home
        service: home
        squad: extrato_vendas
        tribo: processamento_liquidacao
        tribe: processamento_liquidacao
        vertical: aceitacao
        subservico: ms-balance-pix-transactions-worker-fee-enforcer
        escalation: "PJ-Extrato_Venda_e_Recebiveis"
      enabled: true
      image: 289208114389.dkr.ecr.us-east-1.amazonaws.com/picpay-dev/ms-balance-pix-transactions
      args: 
        - "-Dotel.resource.attributes=service.name=ms-balance-pix-transactions"
        - "-Dspring.profiles.active=pix-pj-fee-enforcer,pix-pj-fee-enforcer-authenticated"
        - "-XX:MaxRAMPercentage=70"
        - "-XX:+UseG1GC"
      envFrom:
        - secretRef:
            name: envs
        - configMapRef:
            name: localenv
      env:
        - name: SERVER_SHUTDOWN_MODE
          value: "graceful"
      lifecycle:
        preStop:
          - "/bin/bash"
          - "-c"
          - "/bin/sleep 20"
      readiness:
        httpGet:
          path: /actuator/health/readiness
          port: 8080
        initialDelaySeconds: 30
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 3
        timeoutSeconds: 5
      liveness:
        httpGet:
          path: /actuator/health/liveness
          port: 8080
        initialDelaySeconds: 200
        periodSeconds: 5
        successThreshold: 1
        failureThreshold: 4
        timeoutSeconds: 5
      hpa:
        enabled: true
        min: 1
        max: 2
      containerPort: 8080
      workload: balance-pix-transactions
      spot_suport: high-priority
      requests_cpu: 100m
      limits_cpu: 550m
      requests_memory: 1450Mi
      limits_memory: 1450Mi
      tolerations:
        - effect: NoExecute
          key: spot
          value: "true"
        - effect: NoSchedule
          key: spot
          value: "true"
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: family
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: picpay-ops/workload
                    operator: In
                    values:
                      - financial-services-pj3
                  - key: app
                    operator: In
                    values:
                      - financial-services-pj3

  configmaps:
    - name: localenv
      data:
        BALANCE_SERVICES_COEXISTENCE_CHANNEL_SERVICE_URL: "http://ms-seller-api-acquirer-capture-solution.ms.qa"
        BALANCE_CONFIG_PIX_ENABLE_SETTLEMENT_PRODUCER: "false"
        BALANCE_KAFKA_TOPIC_PIX_PJ_FEE_ENFORCER: "pix-pj-fee-enforcer_output-events"
        BALANCE_BANKPJ_KAFKA_LISTENER_BOOTSTRAP: "b-1.mskbankpjuse1hom.ol2v6z.c1.kafka.us-east-1.amazonaws.com:9096,b-2.mskbankpjuse1hom.ol2v6z.c1.kafka.us-east-1.amazonaws.com:9096,b-3.mskbankpjuse1hom.ol2v6z.c1.kafka.us-east-1.amazonaws.com:9096"
        BALANCE_FNCSVPJ_KAFKA_LISTENER_BOOTSTRAP: "b-1.mskfncsvpjuse1hom.1pn4n2.c25.kafka.us-east-1.amazonaws.com:9096,b-2.mskfncsvpjuse1hom.1pn4n2.c25.kafka.us-east-1.amazonaws.com:9096,b-3.mskfncsvpjuse1hom.1pn4n2.c25.kafka.us-east-1.amazonaws.com:9096"
        BALANCE_FNSVCPF_KAFKA_LISTENER_BOOTSTRAP: "b-1.mskfnsvcpfuse1hom.84ys4q.c23.kafka.us-east-1.amazonaws.com:9096,b-2.mskfnsvcpfuse1hom.84ys4q.c23.kafka.us-east-1.amazonaws.com:9096,b-3.mskfnsvcpfuse1hom.84ys4q.c23.kafka.us-east-1.amazonaws.com:9096"
        BALANCE_DEFAULT_KAFKA_RETRY_DELAY: "60000"

picpay-ms-v2:
  enabled: false
