private void copyDirectoryFromClasspath(String resourcePath, Path targetPath) throws IOException {
    PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();
    Resource[] resources = resolver.getResources("classpath*:" + resourcePath + "/**");

    for (Resource resource : resources) {
        if (resource.isReadable()) {
            String relativePath = resource.getURL().getPath();
            String[] parts = relativePath.split("!/");
            String pathInsideJar = parts.length > 1 ? parts[1] : relativePath;

            String resourceRelativePath = pathInsideJar.substring(resourcePath.length() + 1);
            Path targetFile = targetPath.resolve(resourceRelativePath);

            if (resource.getURL().toString().endsWith("/")) {
                // É um diretório; cria se não existir
                Files.createDirectories(targetFile);
            } else {
                // É um arquivo; copia
                Files.createDirectories(targetFile.getParent());
                try (InputStream is = resource.getInputStream()) {
                    Files.copy(is, targetFile, StandardCopyOption.REPLACE_EXISTING);
                }
            }
        }
    }
